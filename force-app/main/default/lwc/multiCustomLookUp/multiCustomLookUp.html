<template>
  <div class="slds-box slds-theme_shade">
    <div class="slds-form-element">
      <div class="slds-form-element__control">
        <div class="slds-combobox_container">
          <div
            class="slds-combobox slds-dropdown-trigger slds-dropdown-trigger_click slds-is-open"
          >
            <div
              class="slds-combobox__form-element slds-input-has-icon slds-input-has-icon_right"
              role="none"
            >
              <lightning-input
                type="search"
                label={label}
                placeholder="Enter searchkey..."
                onchange={changeHandler}
              ></lightning-input>
              <!-- <span
                class="slds-icon_container slds-icon-utility-search slds-input__icon slds-input__icon_right"
              >
                <svg
                  class="slds-icon slds-icon slds-icon_x-small slds-icon-text-default"
                  aria-hidden="true"
                >
                  <use
                    xlink:href="/assets/icons/utility-sprite/svg/symbols.svg#search"
                  ></use>
                </svg>
              </span> -->
            </div>
            <lightning-pill-container
              items={selectedRecords}
              onitemremove={handleItemRemove}
            >
            </lightning-pill-container>
            <template lwc:if={diplayRecords}>
              <div
                id="listbox-id-2"
                class="slds-dropdown slds-dropdown_length-with-icon-7 slds-dropdown_fluid"
                role="listbox"
                tabindex="0"
                aria-busy="false"
              >
                <ul
                  class="slds-listbox slds-listbox_vertical"
                  role="presentation"
                >
                  <template for:each={searchedRecords} for:item="output">
                    <li
                      key={output.Id}
                      role="presentation"
                      class="slds-listbox__item"
                      onclick={clickHandler}
                    >
                      <div
                        id="option16"
                        class="slds-media slds-listbox__option slds-listbox__option_entity slds-listbox__option_has-meta"
                        role="option"
                      >
                        <span
                          class="slds-media__figure slds-listbox__option-icon"
                        >
                          <span
                            class="slds-icon_container slds-icon-standard-account"
                          >
                            <lightning-icon
                              icon-name={iconName}
                              size="small"
                              alternative-text={output.Name}
                            ></lightning-icon>
                            <!-- <svg
                              class="slds-icon slds-icon_small"
                              aria-hidden="true"
                            >
                              <use
                                xlink:href="/assets/icons/standard-sprite/svg/symbols.svg#account"
                              ></use>
                            </svg> -->
                          </span>
                        </span>
                        <span class="slds-media__body">
                          <span
                            class="slds-listbox__option-text slds-listbox__option-text_entity"
                            data-recid={output.Id}
                            >{output.Name}</span
                          >
                        </span>
                      </div>
                    </li>
                  </template>
                </ul>
              </div>
            </template>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>
